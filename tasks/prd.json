{
  "project": "War Room (Hybrid Mission Control)",
  "branchName": "ralph/war-room",
  "description": "Build a local War Room webapp that generates/imports plans, stages lanes (worktrees+Cursor), tracks state/artifacts, and supports hybrid kickoff (OpenClaw + manual Claude Code).",
  "userStories": [
    {
      "id": "WR-001",
      "title": "Choose canonical app root (avoid duplicate Next scaffolds)",
      "description": "As AJ, I want a single canonical War Room Next.js app so root inference and dependency resolution are deterministic.",
      "acceptanceCriteria": [
        "There is exactly one primary Next.js app directory for War Room (recommend: warroom-app/)",
        "Root-level Next scaffolding is removed/archived (no longer used for dev)",
        "Dev instructions point to the canonical app",
        "Typecheck/lint/build succeed in canonical app"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-002",
      "title": "Fix Node/bin-link reliability for tsc/eslint/next",
      "description": "As AJ, I want deterministic tsc/eslint/next execution so installs don’t randomly break.",
      "acceptanceCriteria": [
        "Fresh npm install works and npm run typecheck|lint|build succeed",
        "Node version strategy documented (.nvmrc/.tool-versions) OR minimal postinstall fix exists",
        "No manual symlink hacks required after install"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-003",
      "title": "Gitignore baseline to prevent generated artifacts from being tracked",
      "description": "As AJ, I want generated build artifacts ignored so git doesn’t show massive diffs.",
      "acceptanceCriteria": [
        ".gitignore includes .next/, node_modules/, dist/, logs",
        "No tracked .next/ or node_modules/ in repo history (in this workstream)"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-010",
      "title": "Runs dashboard lists run folders",
      "description": "As AJ, I want War Room to list runs from ~/.openclaw/workspace/warroom/runs so I can see what’s happening.",
      "acceptanceCriteria": [
        "UI lists runs with slug, status, startMode, updatedAt",
        "Clicking a run shows plan summary + lane list"
      ],
      "priority": 10,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-011",
      "title": "Render run folder from plan.json and status.json",
      "description": "As AJ, I want the UI to render from file truth so UI is consistent with disk.",
      "acceptanceCriteria": [
        "UI reads plan.json from disk and renders",
        "UI reads status.json from disk and shows lane completion"
      ],
      "priority": 11,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-012",
      "title": "Status update API for marking lanes complete",
      "description": "As AJ, I want to mark lanes complete so progress persists.",
      "acceptanceCriteria": [
        "API updates status.json (lanesCompleted, status, updatedAt)",
        "UI toggles lane completion"
      ],
      "priority": 12,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-020",
      "title": "Generate plan creates run folder with plan.json + packets",
      "description": "As AJ, I want Generate Plan to write plan.json + packets to a run directory.",
      "acceptanceCriteria": [
        "POST /api/generate-plan returns {plan, runDir}",
        "Run folder created with correct structure",
        "Packets generated per lane"
      ],
      "priority": 20,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-021",
      "title": "Copy PM Prompt panel",
      "description": "As AJ, I want War Room to generate a copy/paste prompt for Claude Code PM so I can manually kick off planning.",
      "acceptanceCriteria": [
        "UI shows Copy PM Prompt",
        "Prompt includes /warroom-plan and fallback file path",
        "Prompt includes repoPath, goal, constraints"
      ],
      "priority": 21,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-022",
      "title": "Import plan.json via paste",
      "description": "As AJ, I want to paste a JSON plan into War Room to create a run.",
      "acceptanceCriteria": [
        "Import accepts JSON and writes to new run folder",
        "Packets can be provided or auto-generated"
      ],
      "priority": 22,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-023",
      "title": "Import existing run folder by path",
      "description": "As AJ, I want to point War Room at an existing run folder and have it render.",
      "acceptanceCriteria": [
        "UI can open an existing runDir and render it"
      ],
      "priority": 23,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-030",
      "title": "Stage lanes creates worktrees",
      "description": "As AJ, I want War Room to create git worktrees for each lane.",
      "acceptanceCriteria": [
        "API endpoint creates worktrees at lane.worktreePath",
        "Branches created per lane if missing",
        "Errors are handled and surfaced"
      ],
      "priority": 30,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-031",
      "title": "Stage lanes opens Cursor windows",
      "description": "As AJ, I want War Room to open Cursor windows per lane.",
      "acceptanceCriteria": [
        "War Room runs /usr/local/bin/cursor -n <worktreePath> for each lane",
        "UI shows staged status"
      ],
      "priority": 31,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-032",
      "title": "Stage lanes writes WARROOM_PACKET.md into each worktree",
      "description": "As AJ, I want each lane worktree to contain a ready-to-paste packet file.",
      "acceptanceCriteria": [
        "WARROOM_PACKET.md written to each worktree",
        "Content matches packet in run folder"
      ],
      "priority": 32,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-033",
      "title": "Autonomy toggle (dangerous skip) updates packets",
      "description": "As AJ, I want to toggle skip permissions so I don’t click approvals constantly.",
      "acceptanceCriteria": [
        "UI toggle sets lane.autonomy.dangerouslySkipPermissions",
        "Packets instruct running claude --dangerously-skip-permissions when enabled"
      ],
      "priority": 33,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-040",
      "title": "Foundation lane enforcement to prevent merge conflicts",
      "description": "As AJ, I want plan generation to enforce a foundation lane for scaffolding tasks.",
      "acceptanceCriteria": [
        "If goal indicates scaffolding/foundation, lane-1 is foundation",
        "Non-foundation lanes depend on foundation"
      ],
      "priority": 40,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-041",
      "title": "Allowed paths included in packets",
      "description": "As AJ, I want packets to include Allowed Paths so each lane stays in its lane.",
      "acceptanceCriteria": [
        "Packets include Allowed Paths list",
        "Packets include git diff --stat guardrail"
      ],
      "priority": 41,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-050",
      "title": "OpenClaw kickoff integration for Generate Plan",
      "description": "As AJ, I want War Room to request OpenClaw to generate a plan so kickoff can be autonomous.",
      "acceptanceCriteria": [
        "War Room can call OpenClaw and receive a plan artifact",
        "Run folder is created and rendered"
      ],
      "priority": 50,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-060",
      "title": "Merge screen shows lane readiness",
      "description": "As AJ, I want War Room to show which lanes have commits and are ready to merge.",
      "acceptanceCriteria": [
        "UI shows per-lane commit count ahead of integration",
        "UI highlights conflicts risk (file overlap heuristic)"
      ],
      "priority": 60,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-061",
      "title": "Propose merge plan (PM)",
      "description": "As AJ, I want War Room to ask PM to propose merge order and method.",
      "acceptanceCriteria": [
        "UI button triggers proposal",
        "Proposal stored in run artifacts"
      ],
      "priority": 61,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-062",
      "title": "Execute merge with checkpoints",
      "description": "As AJ, I want War Room to execute merges into integration branch with checkpoints.",
      "acceptanceCriteria": [
        "Merges happen in proposed order",
        "On conflict: stop and open Cursor for resolution",
        "Never merges to main without explicit confirmation"
      ],
      "priority": 62,
      "passes": false,
      "notes": ""
    },
    {
      "id": "WR-070",
      "title": "Improve UI clarity: what War Room does vs what AJ does",
      "description": "As AJ, I want the UI to clearly explain what War Room does vs what I do next.",
      "acceptanceCriteria": [
        "Plan viewer shows Next Steps checklist",
        "Copy PM Prompt is obvious",
        "Stage Lanes explains opening Cursor windows and writing packets"
      ],
      "priority": 70,
      "passes": false,
      "notes": ""
    }
  ]
}
