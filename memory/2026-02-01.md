# 2026-02-01 — Session Notes (append)

## Key learnings / decisions (Claude Code + Ralph + OpenClaw)

### Claude Code usage
- When we say “use Claude Code”, we mean the `claude` CLI (Claude Code v2.x) running under AJ’s authenticated **Claude Max** account.
- For autonomous loops, run Claude Code with:
  - `claude --dangerously-skip-permissions`
  - Use a TTY (`pty=true` when launching from OpenClaw) or interactive terminal; non-interactive `claude auth status` can hang.

### Ralph loop pattern (how we’re using it)
- Preferred workflow is **Option B** (AJ already installed): use `/prd` + `/ralph` skills inside Claude Code.
  1) **Conversational instruction (Claude Code):** "Load the prd skill and create a PRD for [feature description]".
     - Claude will save a markdown PRD under `tasks/prd-[feature-name].md`.
     - The exact filename is determined by Claude; the next step must reference that exact path.
  2) **Conversational instruction (Claude Code):** "Load the ralph skill and convert tasks/prd-[feature-name].md to prd.json".
     - Produces `tasks/prd.json` with stories structured for autonomous execution.
  3) **Run the loop script:**
     - Upstream Ralph README: `./scripts/ralph/ralph.sh --tool claude [max_iterations]` (default 10).
     - **Iteration count matters:** the loop stops after N iterations even if stories remain. Set iterations >= remaining stories unless stopping intentionally.
     - InsideOut repo uses `tasks/ralph.sh` (not `scripts/ralph/ralph.sh`) and expects iteration count as the **first positional arg**.
- Important operational note: avoid clobbering existing workstreams.
  - We archived the prior QA workstream file: `tasks/prd.json` → `tasks/prd-qa-fixes.json`.

### Repo / dev server stability gotcha (Tailwind v4 + Turbopack root)
- Recurrent bug: dev server sometimes resolves Tailwind imports as if workspace root is `~/` (e.g. tries `/Users/ajhart/Desktop/node_modules` or `~/node_modules/tailwindcss`, fails).
- Fix that held best: switch config to CommonJS and force Turbopack root to repo dir:
  - `next.config.ts` → `next.config.js`
  - `turbopack: { root: __dirname }`
- Also observed: multiple `next dev` instances can fight over `.next/dev/lock` and cause instability; prefer killing strays + removing lock before restart.

### Merge & workflow decision
- We merged `design/command-center-prototypes` into `main` (green checks) before starting the Ralph workstream.
- This makes Ralph runs deterministic and reduces drift/rebase friction.

---
